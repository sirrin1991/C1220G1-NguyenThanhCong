<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Task1</title>
    <style>
    </style>
</head>
<body>
<img src="furama-resort-da-nang_1.jpg" style="width: 100%;height: 300px">

    <h3 style="text-align: center">Cộng Hòa Xã Hội Chủ Nghĩa Việt Nam</h3>
    <h3 style="text-align: center">Độc lập - Tự do - Hạnh phúc</h3>
    <h3 style="text-align: center">HỢP ĐỒNG</h3>
    <span><b>Họ và tên : </b></span><span id="name"></span><br>
    <span><b>Số CMND : </b></span><span id="cmnd"></span><br>
    <span><b>Ngày tháng năm sinh : </b></span><span id="birthday"></span><br>
    <span><b>Email : </b></span><span id="mail"></span><br>
    <span><b>Địa chỉ : </b></span><span id="address"></span><br>
    <span><b>Loại Customer : </b></span>
    <select id="cus">
        <option name="loaicus">Diamond</option>
        <option name="loaicus">Platinum</option>
        <option name="loaicus">Gold</option>
        <option name="loaicus">Silver</option>
        <option name="loaicus">Member</option>
    </select> <br>
    <span><b>Giảm giá : </b></span><span id="giamgia"></span><br>
    <span><b>Số lượng khách đi kèm : </b></span><span id="num"></span><br>
    <span><b>Số ngày thuê : </b></span><span id="rent"></span><br>
    <span><b>Loại dịch vụ : </b></span><span id="ser"></span>
    <select id="dichvu">
        <option name="dichvu" value="villa">Villa 500$/Ngày</option>
        <option name="dichvu" value="house">House 300$/Ngày</option>
        <option name="dichvu" value="room">Room 100$/Ngày</option>
    </select><br>
    <span><b>Loại phòng thuê : </b></span>
    <select id="room">
        <option name="room">Vip</option>
        <option name="room">Business</option>
        <option name="room">Normal</option>
    </select><br><p id="1">Tổng tiền quý khách phải thanh toán là</p>

    <input type="button" onclick="submit()" value="Đồng ý">




<script>
    let name = prompt("Họ và tên");
    name = name.trim();
    name = name.toLocaleLowerCase();
    let replaceName = " ";
    for (i=0; i<name.length; i++){
        if(name.charAt(i)===" " && name.charAt(i+1)===" "){
            continue;
        }
        if (name.charAt(i-1)===" " || i ===0){
            replaceName += name.charAt(i).toLocaleUpperCase();
            continue;
        }
        replaceName += name.charAt(i)
    }
    name = replaceName;
    document.getElementById("name").innerHTML = name;
    let check =false;
    let iCard;
    do{
        iCard = parseFloat(prompt("Nhập số CMND"));
      check = (Number.isInteger(iCard) && iCard.toString().length === 8)
    }while (!check);
    document.getElementById("cmnd").innerHTML = iCard;

    check = false;
    let dOB;
    do {
        dOB = prompt("Nhập ngày tháng năm sinh");
        if (dOB.charAt(2) === "/" && dOB.charAt(5) === '/'){
            let day = parseFloat(dOB.substring(0,2));
            let month = parseFloat(dOB.substring(3,5));
            let year = parseFloat(dOB.substring(6,10));
            if (Number.isInteger(day) && Number.isInteger(month) && Number.isInteger(year)){
                if ( day > 0 && day < 32 && month > 0 && month < 13 && year > 1920 && year < 2021){
                    check = true
                }
            }

        }
        if (!check){
            alert("Vui lòng nhập sinh nhật đúng định dạng DD/MM/YYYY")
        }
    }while (!check);
    document.getElementById("birthday").innerHTML = dOB;

    check = false;
    let email ;
    let countA = 0;
    let countDot = 0;
    do {
        email = prompt("Nhập Email của bạn");
        if (email.length < 16){
            alert("Vui lòng nhập đúng email");
        }else {
            for (let i = 5; i < email.length; i++) {
                if (email.charAt(i) === "@") {
                    countA++
                }
                for (let j = i + 1; j < email.length; j++) {
                    if (email.charAt(i) === ".") {
                        countDot++
                    }
                }
            }
            if (countDot < 1 && countA !== 1) {
                alert("Vui lòng nhập đúng email")
            } else {
                check = true
            }
        }
    }while (!check);
    document.getElementById("mail").innerHTML = email;

    let addRess = prompt("Địa chỉ");
    let replaceAddress = "";
    addRess = addRess.trim();
    addRess = addRess.toLocaleLowerCase();
    for (let i = 0; i<addRess.length; i++){
        if (addRess.charAt(i) === " " && addRess.charAt(i+1) === " "){
            continue;
        }
        if (i===0 || addRess.charAt(i-1)===" "){
            replaceAddress += addRess.charAt(i).toLocaleUpperCase();
            continue;
        }
        replaceAddress += addRess.charAt(i)
    } addRess = replaceAddress;
    document.getElementById("address").innerHTML = addRess;

    let customer;
    do {
        customer = parseFloat(prompt("Nhập số người đi cùng"));
        check = (Number.isInteger(customer) && customer > 0 ) }
    while (!check);
    document.getElementById("num").innerHTML = customer;
    let rentDays;
    do {
        rentDays = parseFloat(prompt("Nhập số ngày thuê"));
        check = (Number.isInteger(rentDays) && rentDays > 0 ) }
    while (!check);
    document.getElementById("rent").innerHTML = rentDays;
    function submit() {
        let serVice = document.getElementById("dichvu").value;
        let moneyvilla = (rentDays * 500);
        let moneyhouse = (rentDays * 300);
        let moneyroom = (rentDays * 100);
        if (serVice==="villa"){
            document.getElementById("1").innerHTML = ("Tổng tiền quý khách phải thanh toán là " + moneyvilla + "$")
        }else if (serVice==="house"){
            document.getElementById("1").innerHTML = ("Tổng tiền quý khách phải thanh toán là " + moneyhouse+ "$")
        }else {
            document.getElementById("1").innerHTML = ("Tổng tiền quý khách phải thanh toán là " + moneyroom+ "$")
        }


    }


</script>
</body>
</html>